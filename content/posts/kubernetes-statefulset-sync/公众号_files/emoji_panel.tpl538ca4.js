define("pages/modules/media_dialog/sub_notify_dialog/sub_notify_dialog.css.js", [], function (require, exports, module){module.exports = ".weui-desktop-dialog__ft {  position: relative;}.subnotify_selected_tips {  position: absolute;  bottom: 34px;  cursor: pointer;}.subnotify_dialog_table {  padding: 0 32px;  min-height: 400px;}.subnotify_dialog_tips {  margin-top: 16px;  margin-bottom: 8px;  text-align: right;}.subnotify-list__empty {  color: var(--weuiDesktop_descColor);  line-height: 300px;  text-align: center;}";});define("pages/modules/media_dialog/sub_notify_dialog/sub_notify_dialog.tpl.js",[],function(t,e,i){return'<mp-dialog :width="960" weui="true" v-model="dialogShow" title="插入订阅通知" wrap-class="subnotify_dialog" @close="dialogClose" @visible-change="dialogVisibleChange" rootElm="#vue_app">  <div class="subnotify_dialog_table">    <div class="subnotify_dialog_tips"><a target="_blank" href="https://developers.weixin.qq.com/doc/offiaccount/Subscription_Messages/intro.html#%E6%AD%A5%E9%AA%A4%E5%9B%9B%EF%BC%9A%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%9B%BE%E6%96%87%E6%B6%88%E6%81%AF%E3%80%81%E7%BD%91%E9%A1%B5%E8%AE%BE%E7%BD%AE%E8%AE%A2%E9%98%85%E9%80%9A%E7%9F%A5%E7%BB%84%E4%BB%B6">了解文章中设置订阅通知</a></div>    <table class="weui-desktop-table">      <thead class="weui-desktop-table__hd">        <tr>          <th></th>          <th>通知标题</th>          <th>关键词</th>          <th>类型</th>        </tr>      </thead>      <tbody class="weui-desktop-table__bd">        <tr v-for="(tmpl, index) in filteredList" :key="`${index}_${tmpl.priTmplId}`">          <td><mp-checkbox v-model="tmpl.isChecked" :disabled="tmpl.isDisabled"></mp-checkbox></td>          <td>{{tmpl.title}}</td>          <td>{{tmpl.keywordNameList.join(\'、\')}}</td>          <td>{{+tmpl.type === 2 ? \'一次性订阅\' : \'长期订阅\'}}</td>        </tr>      </tbody>    </table>    <div v-if="loading" class="subnotify-list__empty"><i class="weui-desktop-loading"></i></div>    <div class="subnotify-list__empty" v-else-if="!totalCount">暂无数据</div>    <mp-pagination :total-num="totalCount" :current="currentPage" :per-page="perPage" @page-change="pageChange"></mp-pagination>  </div>  <template slot="footer">    <div class="subnotify_selected_tips">      <span>已选择<em class="weui-desktop-highlight">{{selectedCount}}/5</em>条通知</span>    </div>    <mp-button type="primary" @click="submit" :disabled="!totalCount">插入</mp-button>    <mp-button @click="dialogClose">取消</mp-button>  </template></mp-dialog>'})
define("pages/editor/liveDialog4Web1.js",["pages/modules/media_dialog/live_dialog/live_dialog.js"],function(e,i,o){"use strict"
function n(){return{isShow:!1,defaultShow:!1,count:0,liveData:{}}}o.exports={getParams:n,bindEvent:function(i){i.eventBus.$on("requireLiveDialog",function(){i.isRequired||(console.log("require live"),e("pages/modules/media_dialog/live_dialog/live_dialog.js"),i.isRequired=!0)}),i.eventBus.$on("showLiveDialog",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}
i.eventBus.$emit("requireLiveDialog"),function(e,i){var o=n()
for(var a in i)void 0!==o[a]&&(o[a]=i[a])
for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e.params[t]=o[t])
e.params.isShow=!0,e.params.defaultShow=!0}(i,e),i.eventBus.$emit("update-component",{key:"mp-live-dialog",params:i.params})})},close:function(e){e.eventBus.$emit("showLiveDialog_callback",e.data)}}})
define("pages/modules/media_dialog/live_dialog/live_dialog.js",["pages/modules/media_dialog/live_dialog/live_dialog.css.js","vue-weui/src/dialog/dialog.js","vue-weui/src/button/button.js","vue-weui/src/tab/tab.js","vue-weui/src/toptips/toptips.js","vue-weui/src/checkbox/checkbox.js","pages/modules/media_dialog/live_dialog/live_dialog.tpl.js","3rd/moment/moment.js","pages/modules/utils/cgi.js","pages/modules/utils/url.js"],function(t,e,i){"use strict"
function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t("pages/modules/media_dialog/live_dialog/live_dialog.css.js"),t("vue-weui/src/dialog/dialog.js"),t("vue-weui/src/button/button.js"),t("vue-weui/src/tab/tab.js"),t("vue-weui/src/toptips/toptips.js"),t("vue-weui/src/checkbox/checkbox.js")
var o=t("pages/modules/media_dialog/live_dialog/live_dialog.tpl.js"),a=t("3rd/moment/moment.js"),l=t("pages/modules/utils/cgi.js"),n=t("pages/modules/utils/url.js")
Vue.component("mp-live-dialog",{template:o,props:{value:{type:Boolean,default:!1},count:{type:Number,default:0}},mounted:function(){var o=this
!0===this.value&&this.show(),this.list=this.list_by_start,this.$nextTick(function(){var i=document.querySelector("#js_live_room_table"),s=i.offsetHeight
i.onscroll=function(){var t=i.scrollTop,e=i.scrollHeight;-1<=s+t-e&&o.updateList()}}),this.updateList()},data:function(){var t={dialogShow:!1,sortTab:[{id:"0",name:"按计划时间排序"}],selectTab:"0",selectIndex:-1,selectIndexs:[],limit:5,isLoading:!1,isShowTips:!1,hasMore:!0,list_by_start:[],list_by_create:[],list:[],banRoomStatus:104,expireRoomStatus:107,total:0,max_count:3,url:n.fullUrl("https://mp.weixin.qq.com/cgi-bin/livelogin?1=1")}
return t},watch:{dialogShow:function(t){this.$emit("input",t)},value:function(t){!0===t?this.show():this.hide()}},computed:{canSubmit:function(){return 0<this.selectIndexs.length},showLimitTip:function(){return this.count+this.selectIndexs.length>=this.max_count}},methods:{isDisabled:function(t,e){return t.live_status===this.banRoomStatus||-1===this.selectIndexs.indexOf(e)&&this.selectIndexs.length+this.count>=this.max_count},changeSortTab:function(t){t!==this.selectTab&&(this.selectTab=t,this.refreshList(),this.selectIndex=-1,this.$forceUpdate())},changeSelectLive:function(){},updateList:function(){var i=this
if(!this.isLoading&&this.hasMore){this.isLoading=!0
var t="0"===this.selectTab?"start_time":"create_time"
l.post({url:"/cgi-bin/liveinfo?action=list",data:{offset:this.list.length,limit:this.limit,order:t}},function(t){if(t&&t.base_resp&&0==+t.base_resp.ret){var e=t.rooms.map(function(t){return i.formatItemDate(t)})
i.total=t.total,"0"===i.selectTab?i.list_by_start=i.list_by_start.concat(e):i.list_by_create=i.list_by_create.concat(e),i.refreshList(),(0===e.length||i.list.length>=i.total)&&(i.hasMore=!1),i.$forceUpdate()}else console.log("[getLiveRoom error]")
i.isLoading=!1})}},refreshList:function(){"0"===this.selectTab?this.list=this.list_by_start:this.list=this.list_by_create,0===this.list.length&&this.updateList()},submit:function(){var e=this
if(this.count+this.selectIndexs.length>this.max_count)this.isShowTips=!0
else{this.hide()
var i=[]
this.selectIndexs.forEach(function(t){i.push(e.list[t])}),this.$emit("select",i)}},getDateDesc:function(t){if(!t.start_time)return""
var e=t.start_time_desc,i=t.end_time_desc,s=e.slice(0,-5)
return s===i.slice(0,-5)&&(i=i.substr(-5)),"<p>"+s+'</p><p class="selec-live-dialog__table-cell__live-time">'+e.substr(-5)+"-"+i+"</p>"},getStatusDesc:function(t){var e,i=t.live_status
return(s(e={0:"未开始",101:"直播中",102:"未开始",103:"已结束"},this.banRoomStatus,"禁播"),s(e,105,"直播中"),s(e,106,"直播中"),s(e,this.expireRoomStatus,"已结束"),e)[i]||"异常"},formatDate:function(t){if(!t)return""
var e=(new Date).getFullYear(),i=a.unix(t).format("YYYY年M月D日HH:mm")
return+e==+i.substring(0,4)&&(i=i.substring(5)),i},formatItemDate:function(t){return t.create_time_desc=this.formatDate(t.create_time)||"",t.start_time_desc=this.formatDate(t.start_time)||"",t.end_time_desc=this.formatDate(t.end_time)||"",t},show:function(){!1===this.dialogShow&&(this.dialogShow=!0)},hide:function(){!0===this.dialogShow&&(this.dialogShow=!1)},closeDialog:function(){this.hide(),this.$emit("cancel")}}})})
define("pages/modules/media_dialog/live_dialog/live_dialog.css.js", [], function (require, exports, module){module.exports = "@grid BreakPoints: {  xs: 0;  sm: 576px;  md: 768px;  lg: 992px;  xl: 1200px;}@container MaxWidths: {  xs: auto;  sm: 540px;  md: 720px;  lg: 960px;  xl: 1140px;}/*How to usefont-family: 'wechatnum';*/.mode_media_dialog_select_live .weui-toptips {  position: absolute;  margin-top: -55px;}.mode_media_dialog_select_live .weui-desktop-dialog__bd {  position: relative;}.mode_media_dialog_select_live .select_live_dialog__head {  position: relative;  padding: 0 32px;}.mode_media_dialog_select_live .select_live_dialog__body {  padding: 32px;}.mode_media_dialog_select_live .select_live_dialog__head__extra {  position: absolute;  top: 50%;  -ms-transform: translateY(-50%);      transform: translateY(-50%);  right: 32px;}.mode_media_dialog_select_live .select_live_dialog__head__tips {  position: absolute;  top: 50%;  -ms-transform: translateY(-50%);      transform: translateY(-50%);  left: 32px;}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav_current {  background: none;  border-color: #C9CACE;}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav_current a {  color: var(--weuiDesktop_themeColor);}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav {  position: relative;  border-right-style: none;  border-left-style: none;}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav:first-child {  border-left-style: solid;}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav:last-child {  border-right-style: solid;}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav:last-child:after {  display: none;}.mode_media_dialog_select_live .weui-desktop-tab_section .weui-desktop-tab__nav:after {  position: absolute;  top: 50%;  right: 0;  -ms-transform: translateY(-50%);      transform: translateY(-50%);  display: inline-block;  vertical-align: middle;  content: ' ';  height: 15px;  width: 1px;  background-color: #C9CACE;}.mode_media_dialog_select_live .selec-live-dialog__table-cell__live-info__inner {  display: -ms-flexbox;  display: flex;}.mode_media_dialog_select_live .selec-live-dialog__table-cell__live-info__img {  width: 150px;  height: 120px;  -ms-flex-negative: 0;      flex-shrink: 0;}.mode_media_dialog_select_live .selec-live-dialog__table-cell__live-info__content {  -ms-flex: 1;      flex: 1;  padding-left: 16px;  padding-top: 4px;}.mode_media_dialog_select_live .selec-live-dialog__table-cell__live-info__title {  margin-bottom: 20px;}.mode_media_dialog_select_live .selec-live-dialog__table-cell__live-time,.mode_media_dialog_select_live .selec-live-dialog__table-cell__live-info__desc {  color: var(--weuiDesktop_FG_Text_descColor);}.select_live_dialog .weui-desktop-table__hd,.select_live_dialog .weui-desktop-table__tr {  display: -ms-flexbox;  display: flex;}.select_live_dialog .weui-desktop-table__hd:hover,.select_live_dialog .weui-desktop-table__tr:hover {  background-color: var(--weuiDesktop_areaBgColor);}.select_live_dialog .weui-desktop-table__bd {  max-height: 300px;}.select_live_dialog .weui-desktop-table__tr__info {  -ms-flex-pack: center;      justify-content: center;}.select_live_dialog .weui-desktop-table__cell {  padding: 18px 20px;  width: 50%;  box-sizing: border-box;}.select_live_dialog .weui-desktop-table__cell:first-child {  width: 33%;}.select_live_dialog .weui-desktop-table__cell:last-child {  width: 17%;}label.weui-desktop-form__check-label.live-checkbox span {  display: none;}.live-checkbox {  margin-right: 20px;  float: left;}.select-table {  height: 450px;  overflow: auto;  position: relative;  overscroll-behavior: contain;}";});define("pages/modules/media_dialog/live_dialog/live_dialog.tpl.js",[],function(e,i,l){return'<div class="mode_media_dialog_select_live">  <mp-dialog     ref="liveDialog"    title="选择直播间"    v-model="dialogShow"    :width="740"    weui="true"    class="select_live_dialog"    @close="closeDialog"    rootElm="#vue_app">    <div style="overflow: hidden;position: relative">      <mp-toptips style="margin-top: 0" v-model="isShowTips" type="error" msg="每篇图文最多添加三个直播间"></mp-toptips>      <div class="select_live_dialog__head">        <mp-tab :tabs="sortTab" type="section" selected="0" @click="changeSortTab" style="visibility: hidden"/>        <span class="select_live_dialog__head__tips" v-show="showLimitTip">每篇图文最多添加三个直播间</span>        <a :href="url" class="select_live_dialog__head__extra" target="_blank">直播间配置</a>      </div>        <div class="select_live_dialog__body">          <mp-checkbox-group v-model="selectIndexs" @change="changeSelectLive" style="position: relative">            <div class="select-table" id="js_live_room_table">              <div class="weui-desktop-table">                <div class="weui-desktop-table__hd">                  <div class="weui-desktop-table__cell">                    <span v-if="selectTab===\'0\'">计划时间</span>                    <span v-else>创建时间</span>                  </div>                  <div class="weui-desktop-table__cell">直播间信息</div>                  <div class="weui-desktop-table__cell tr">状态</div>                </div>                <div class="weui-desktop-table__bd">                  <template v-if="list.length > 0">                    <div class="weui-desktop-table__tr" v-for="(item, i) in list" v-if="item.live_status !== banRoomStatus && item.live_status !== expireRoomStatus">                      <div class="weui-desktop-table__cell">                        <mp-checkbox :label="i" class="live-checkbox" :disabled="isDisabled(item, i)"></mp-checkbox>                        <div style="float: left" v-html="getDateDesc(item)"></div>                      </div>                      <div class="weui-desktop-table__cell">                        <div class="selec-live-dialog__table-cell__live-info__inner">                          <div class="selec-live-dialog__table-cell__live-info__img"                              v-bind:style="{background:\'url(\'+item.anchor_img+\') no-repeat top center / cover\'}"></div>                          <div class="selec-live-dialog__table-cell__live-info__content">                            <p class="selec-live-dialog__table-cell__live-info__title">{{item.name}}</p>                            <p class="selec-live-dialog__table-cell__live-info__desc">房间号：<span>{{item.id}}</span></p>                            <p class="selec-live-dialog__table-cell__live-info__desc">主播：<span>{{item.anchor_name}}</span></p>                          </div>                        </div>                      </div>                      <div class="weui-desktop-table__cell tr">                        <span v-html="getStatusDesc(item)"></span>                      </div>                    </div>                  </template>                  <template v-if="isLoading">                    <div class="weui-desktop-table__tr weui-desktop-table__tr__info">                      <div :colspan="3" loading="true">                        <div class="weui-desktop-loadmore">                          <i class="weui-desktop-loading"></i>加载中                        </div>                      </div>                    </div>                  </template>                </div>              </div>            </div>          </mp-checkbox-group>        </div>    </div>    <div slot="footer">      <mp-button type="primary" :disabled="!canSubmit" @click="submit">确定</mp-button>    </div>  </mp-dialog></div>'})
define("pages/editor/qa_dialog_web1.js",["pages/modules/media_dialog/qa_dialog/qa_dialog.js"],function(a,e,o){"use strict"
function n(){return{defaultShow:!1,isShow:!1,qaData:{}}}o.exports={getParams:n,bindEvent:function(e){e.eventBus.$on("requireQaDialog",function(){e.isRequired||(a("pages/modules/media_dialog/qa_dialog/qa_dialog.js"),e.isRequired=!0)}),e.eventBus.$on("showQaDialog",function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}
e.eventBus.$emit("requireQaDialog"),function(a,e){var o=n()
for(var i in e)void 0!==o[i]&&(o[i]=e[i])
for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(a.params[t]=o[t])
a.params.isShow=!0,a.params.defaultShow=!0}(e,a),e.eventBus.$emit("update-component",{key:"mp-qa-dialog",params:e.params})})},close:function(a){a.eventBus.$emit("showQaDialog_callback",a.data)}}})
define("pages/modules/media_dialog/qa_dialog/qa_dialog.js",["pages/modules/media_dialog/qa_dialog/qa_dialog.css.js","vue-weui/src/button/button.js","vue-weui/src/dialog/dialog.js","vue-weui/src/radio/radio.js","vue-weui/src/radio/radio_group.js","pages/modules/reply/reply.js","pages/modules/media_dialog/qa_dialog/qa_dialog.tpl.js","pages/modules/utils/cgi.js","3rd/editor/common/domUtils.js"],function(i,e,s){"use strict"
i("pages/modules/media_dialog/qa_dialog/qa_dialog.css.js"),i("vue-weui/src/button/button.js"),i("vue-weui/src/dialog/dialog.js"),i("vue-weui/src/radio/radio.js"),i("vue-weui/src/radio/radio_group.js"),i("pages/modules/reply/reply.js")
var t=i("pages/modules/media_dialog/qa_dialog/qa_dialog.tpl.js"),o=i("pages/modules/utils/cgi.js"),a=i("3rd/editor/common/domUtils.js").domUtils
Vue.component("mp-qa-dialog",{template:t,props:{value:{type:Boolean,default:!1}},data:function(){return{title:"",commentSetting:"0",len:0,limit:40,overWarningClass:"",loading:!1,infoDialogShow:!1,saveTips:""}},methods:{closeDialog:function(){this.hide(),this.$emit("cancel")},hide:function(){this.$emit("input",!1)},onChange:function(i){this.len=a.getWordCountContent(i).length,this.len>this.limit?this.overWarningClass="warn":this.overWarningClass=""},cancel:function(){this.infoDialogShow=!1,this.loading=!1},save:function(i){var e=this
this.loading=!0
var s={title:this.title,can_answer_type:+this.commentSetting,ignore_tips:i}
o.post({url:"/cgi-bin/qnamgr?action=add_question",data:s,success:function(i){if(i.base_resp&&203e3===i.base_resp.ret)e.$tipsErr("你所编辑的信息含有违反公众平台协议，相关法律法规和政策的内容，请重新编辑")
else{if(i.base_resp&&203004===i.base_resp.ret)return e.saveTips=i.tips||"你所编辑的信息可能含有违反公众平台协议，相关法律法规和政策的内容，请仔细检查后再保存或发布该信息",void(e.infoDialogShow=!0)
if(!i.base_resp||203007!==i.base_resp.ret)return i.base_resp&&0===i.base_resp.ret?(e.$emit("select",{title:e.title,questionId:i.question_id}),void e.hide()):void e.$tipsErr("系统繁忙，请稍后再试")
e.$tipsErr("内容超出长度限制")}},error:function(){e.$tipsErr("系统繁忙，请稍后再试")},complete:function(){e.loading=!1}})},keepSubmit:function(){this.infoDialogShow=!1,this.save(1)},submit:function(){this.len>this.limit?this.$tipsErr("内容超出长度限制"):this.save(0)}}})})
define("pages/modules/media_dialog/qa_dialog/qa_dialog.css.js", [], function (require, exports, module){module.exports = "@grid BreakPoints: {  xs: 0;  sm: 576px;  md: 768px;  lg: 992px;  xl: 1200px;}@container MaxWidths: {  xs: auto;  sm: 540px;  md: 720px;  lg: 960px;  xl: 1140px;}/*How to usefont-family: 'wechatnum';*/.emotion_editor {  position: relative;  border: 1px solid var(--weuiDesktop_separateColor);}.emotion_editor .edit_area {  padding: 14px 20px;  outline: 0;  color: var(--weuiDesktop_globalColor);  word-wrap: break-word;  -webkit-hyphens: auto;  -ms-hyphens: auto;  hyphens: auto;  background-color: var(--weuiDesktop_cardBgColor);  height: 188px;  overflow-y: auto;}.emotion_editor .edit_area img {  vertical-align: middle;}.emotion_editor .edit_area[placeholder]:empty:before {  content: attr(placeholder);  color: var(--weuiDesktop_FG_Text_descColor);}.emotion_editor:disabled,.emotion_editor[disabled] {  cursor: default;}.emotion_editor:disabled .edit_area,.emotion_editor[disabled] .edit_area,.emotion_editor:disabled .editor_toolbar,.emotion_editor[disabled] .editor_toolbar {  color: var(--weuiDesktop_descColor);  background-color: var(--weuiDesktop_areaBgColor);}.emotion_editor:disabled .icon_emotion,.emotion_editor[disabled] .icon_emotion {  cursor: default;}.emotion_editor:disabled .icon_emotion:hover i,.emotion_editor[disabled] .icon_emotion:hover i {  background: transparent url(\/mpres\/zh_CN\/htmledition\/pages\/modules\/reply\/images\/icon_emotion538ca4.svg) no-repeat 0 0;  width: 20px;  height: 20px;  vertical-align: middle;  display: inline-block;}.emotion_editor:disabled .icon_pic,.emotion_editor[disabled] .icon_pic {  cursor: default;}.emotion_editor:disabled .icon_pic:hover i,.emotion_editor[disabled] .icon_pic:hover i {  background: transparent url(\/mpres\/zh_CN\/htmledition\/pages\/modules\/reply\/images\/icon_pic538ca4.svg) no-repeat 0 0;  width: 20px;  height: 20px;  vertical-align: middle;  display: inline-block;}.editor_toolbar {  padding: 0 20px;  line-height: 36px;  background-color: var(--weuiDesktop_cardBgColor);  border-top: 1px solid var(--weuiDesktop_separateColor);}.editor_toolbar:after {  content: \"\\200B\";  display: block;  height: 0;  clear: both;}.editor_toolbar .weui-desktop-popover__wrp {  display: inline-block;  vertical-align: middle;}.editor_tip {  float: right;  color: var(--weuiDesktop_FG_Text_descColor);}.editor_tip em {  font-style: normal;  margin: 0 3px;}.editor_tip.warn {  color: var(--weuiDesktop_errorColor);}.icon_pic {  height: 28px;  width: 28px;  display: -ms-inline-flexbox;  display: inline-flex;  -ms-flex-align: center;      align-items: center;  -ms-flex-pack: center;      justify-content: center;  overflow: hidden;  font-size: 0;  vertical-align: middle;  cursor: pointer;}.icon_pic:hover i {  background: transparent url(\/mpres\/zh_CN\/htmledition\/pages\/modules\/reply\/images\/icon_pic_hover538ca4.svg) no-repeat 0 0;}.icon_pic i {  margin-top: 3px;  background: transparent url(\/mpres\/zh_CN\/htmledition\/pages\/modules\/reply\/images\/icon_pic538ca4.svg) no-repeat 0 0;  width: 20px;  height: 20px;  vertical-align: middle;  display: inline-block;}.icon_emotion {  float: left;  height: 28px;  width: 28px;  display: -ms-flexbox;  display: flex;  -ms-flex-align: center;      align-items: center;  -ms-flex-pack: center;      justify-content: center;  overflow: hidden;  font-size: 0;  cursor: pointer;}.icon_emotion:hover i {  background: transparent url(\/mpres\/zh_CN\/htmledition\/pages\/modules\/reply\/images\/icon_emotion_hover538ca4.svg) no-repeat 0 0;}.icon_emotion i {  background: transparent url(\/mpres\/zh_CN\/htmledition\/pages\/modules\/reply\/images\/icon_emotion538ca4.svg) no-repeat 0 0;  width: 20px;  height: 20px;  vertical-align: middle;  display: inline-block;}.edit_upload_img {  max-width: 500px;  max-height: 300px;}.qa__insert {  width: 380px;  margin: 0 auto;  padding: 30px 0;}.qa__insert .emotion_editor {  border-radius: 4px;}.qa__insert .emotion_editor .edit_area {  height: 70px;  background-color: transparent;}.qa__insert .editor_toolbar {  border-top: none;}.qa__insert .icon_emotion.emotion_switch {  background: none;  width: auto;  height: auto;}.qa__insert .editor_toolbar {  border-radius: 4px;}.qa__insert .emotions {  border: none;  background-color: transparent;}.qa__insert .emotions_item {  border: none;}.qa__insert .weui-desktop-popover {  opacity: 1;  visibility: visible;}.qa__insert .weui-desktop-popover_pos-up-left {  margin-left: -51px;}.qa__insert-hd {  margin-bottom: 12px;}.qa__insert-input {  position: relative;}.qa__input-notice {  position: absolute;  bottom: 8px;  right: 20px;  z-index: 1;  color: var(--weuiDesktop_FG_Text_descColor);}.qa__input-notice .warn {  color: var(--weuiDesktop_separateColor);}.qa__insert-emoji {  position: absolute;  width: 100%;  bottom: 0;  left: 0;  padding: 0 8px 3px;  box-sizing: border-box;  z-index: 10;}.qa__inset-setting {  margin-top: 30px;}.qa__inset-setting .weui-desktop-form__check-label {  display: block;  margin-bottom: 4px;}.qa__inset-setting-hd {  margin-bottom: 12px;}.qa__confirm {  padding: 20px 0 100px;}";});define("pages/modules/reply/reply.js",["pages/modules/emoji_panel/emoji_panel.js","pages/modules/media_dialog/image_dialog/image_dialog.js","pages/modules/reply/reply.css.js","pages/modules/common/emoji/emoji.js","pages/modules/reply/reply.tpl.js","pages/modules/common/emoji/emoji_data.js","3rd/editor/common/domUtils.js"],function(e,t,n){"use strict"
e("pages/modules/emoji_panel/emoji_panel.js"),e("pages/modules/media_dialog/image_dialog/image_dialog.js"),e("pages/modules/reply/reply.css.js")
for(var i=e("pages/modules/common/emoji/emoji.js"),o=e("pages/modules/reply/reply.tpl.js"),r=e("pages/modules/common/emoji/emoji_data.js"),s=e("3rd/editor/common/domUtils.js").domUtils,a=/msie/.test(navigator.userAgent.toLowerCase()),l=function(){return document.selection?document.selection:(window.getSelection||document.getSelection)()},d=function(e){var t=l()
if(!t)return null
var n,i,o,r=void 0
return t.getRangeAt&&t.rangeCount?r=t.getRangeAt(0):t.getRangeAt||(r=t.createRange()),!r||!(e&&(n=e,(o=(i=r).commonAncestorContainer||i.parentElement&&i.parentElement()||null)&&function(e,t,n){if(n||e!==t)if(e.compareDocumentPosition){var i=e.compareDocumentPosition(t)
if(20===i||0===i)return 1}else if(e.contains(t))return 1}(n,o,!0)))&&e?null:r},c=function(e,t){var n=void 0
n=t?["&","&amp;","¥","&yen;","<","&lt;",">","&gt;"," ","&nbsp;",'"',"&quot;","'","&#39;","`","&#96;"]:["&#96;","`","&#39;","'","&quot;",'"',"&nbsp;"," ","&gt;",">","&lt;","<","&yen;","¥","&amp;","&"]
for(var i=0;i<n.length;i+=2)e=e.replace(new RegExp(n[i],"g"),n[i+1])
return e},u=function(e){return String.prototype.trim?String.prototype.trim.call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},m={},h=0;h<r.length;h++)m[r[h].style]=r[h].emoji||r[h].cn
Vue.component("mp-reply",{template:o,props:{extclass:{type:String,default:""},limit:{type:Number,default:140},ishtml:{type:Boolean,default:!0},hasPic:{type:Boolean,default:!1},linebreak:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1},entertype:{type:Number,default:0},source:{type:String,default:""},content:{type:String,default:""},notEncodeHtml:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledTips:{type:String,default:""},placeholder:{type:String,default:""},countContentByLang:{type:Boolean,default:!1}},model:{prop:"content",event:"change"},data:function(){var e=this._setContent()
return{lastRange:null,count:0,innerhidden:this.hidden,parsedContent:e,bakContent:this._textFilter(this.content),notRender:!1}},computed:{style:function(){var e={}
return e.display=this.innerhidden?"none":"block",e},remain:function(){var e=this.bakContent.replace(/<br\s*\/*>/g,"")
return e=this.countContentByLang?s.getWordCountContent(e):e,this.limit-e.replace(/\n/g,"").length}},watch:{content:function(){var e=this._setContent()
this.notRender||(this.parsedContent=e,this.$refs.editArea&&(this.$refs.editArea.innerHTML=e))}},methods:{_saveRange:function(){this.lastRange=d()},_restoreRange:function(){var e=this.lastRange
if(e){var t=l()
if(t.addRange)t.removeAllRanges(),t.addRange(e)
else{var n=d()
n.setEndPoint&&(n.setEndPoint("EndToEnd",e),n.setEndPoint("StartToStart",e)),n.select()}}},select:function(e){this.disabled||this.insertHtml(e.emojiHtml)},selectImage:function(e){if(!this.disabled){var t=""
e.forEach(function(e){e.url&&(t+='<img class="edit_upload_img" src="'+e.url+'" />')}),this.insertHtml(t)}},showImageDialog:function(){this.disabled||this.$refs.imageDialog.show()},getHtml:function(){var e=this.$refs.editArea.innerHTML
return e="string"==typeof e?u(e):""},getText:function(){return this.getContent().replace(/<br\s*\/*>/g,"\n")},getContent:function(){var e=this.bakContent
return e="string"==typeof e?u(e):""},setContent:function(e){var t=e||""
t=this.linebreak?t.replace(/\n/g,"<br>"):t,e=i(t),t=c(t,!1),this.clear(),this.$refs.editArea.innerHTML=i(c(this._textFilter(e).replace(/<br\s*\/*>/g,"\n"),!0)).replace(/\n/g,"<br>"),this.content=t||e},_setContent:function(){var e=this.content,t=""
return this.bakContent=this._textFilter(this.content),e=this.linebreak?e.replace(/\n/g,"<br>"):e,t=this._textFilter(e).replace(/<br\s*\/*>/g,"\n"),this.notEncodeHtml||(t=c(t.replace(/<br\s*\/*>/g,"\n"),!0)),t=c(t.replace(/&#60;|&#62;/gi,function(e){return{"&#60;":"<","&#62;":">"}[e]})),t=i(t).replace(/\n/g,"<br>")},clear:function(){this.$refs.editArea.innerHTML="",this.$emit("change","")},blur:function(){this.notRender=!1},focus:function(){this.$refs.editArea.focus(),this._restoreRange()},insertHtml:function(e){this.focus()
var t=d()
if(t){if(t.createContextualFragment){e+='<img style="width:1px;height:1px;"></img>'
var n=t.createContextualFragment(e),i=n.lastChild,o=l()
t.deleteContents(),t.insertNode(n),t.setStartBefore(i),t.setEndAfter(i),o.removeAllRanges(),o.addRange(t),document.execCommand("Delete",!1,null)}else e&&t.pasteHTML&&t.pasteHTML(e),t.collapse&&t.collapse(!1),t.select()
this._saveRange(),this.save()}},_xssFilter:function(e){return"string"==typeof e?e.replace(/<|>/g,function(e){return{"<":"&#60;",">":"&#62;"}[e]}):e},_textFilter:function(e){var t=document.createElement("div"),n="",i=[],o=""
t.innerHTML=e
for(var r=t.childNodes.length-1;0<=r;r--){var s=t.childNodes[r]
switch(s.nodeType){case 1:if("IMG"===s.nodeName.toUpperCase()&&(n=s.getAttribute("class"))&&1<(i=n.split(" ")).length&&"icon_emotion_single"===i[0]){o=m[i[1]]
var a=document.createTextNode(o)
t.replaceChild(a,s)}}var l=s.nodeValue
s.nodeValue=this._xssFilter(l)}return e=t.innerHTML,t=null,this.notEncodeHtml||(e=c(e,!1)),this.ishtml?e:e.replace(/<br.*?>/gi,"\n").replace(/<.*?>/g,"")},_filterNode:function(){for(var e=this.$refs.editArea,t=void 0,n=e.childNodes.length-1;0<=n;n--){var i=e.childNodes[n]
switch(i.nodeType){case 1:if("BR"!==i.nodeName.toUpperCase()){var o=void 0,r=!1
if((o="IMG"===i.nodeName.toUpperCase()&&i.classList.contains("icon_emotion_single")?i:"")||(o=i.textContent||i.innerText||"",r=!0),o){var s=r?document.createTextNode(o):o
t=t||s,e.replaceChild(s,i)}else e.removeChild(i)}break
case 3:break
default:e.removeChild(i)}}this._setCursorToEnd(t)},_setCursorToEnd:function(e){if(a&&e){var t=l()
t.extend&&(t.extend(e,e.length),t.collapseToEnd&&t.collapseToEnd())}},getAfterFilterNodeHtml:function(){var e=document.createElement("div")
e.innerHTML=this.$refs.editArea.innerHTML
for(var t=e.childNodes.length-1;0<=t;t--){var n=e.childNodes[t]
switch(n.nodeType){case 1:if("BR"!==n.nodeName.toUpperCase()){var i=void 0,o=!1
if((i="IMG"===n.nodeName.toUpperCase()?n:"")||(i=n.textContent||n.innerText||"",o=!0),i){var r=o?document.createTextNode(i):i
e.replaceChild(r,n)}else e.removeChild(n)}break
case 3:break
default:e.removeChild(n)}}return e.innerHTML},save:function(){document.execCommand("AutoUrlDetect",!1,!1)
var e=this.getAfterFilterNodeHtml()
this.$emit("change",this._textFilter(e)),this.bakContent=this._textFilter(e)},keydownEnter:function(e){if(console.log("$event.keyCode",e.keyCode),229!==e.keyCode){if(e.altKey||e.ctrlKey||e.shiftKey)return
0===this.entertype?(this.insertHtml("<br/>"),this._saveRange()):(this._filterNode(),this.$emit("enter"))}},keydownShiftEnter:function(){1===this.entertype&&(this.insertHtml("<br/>"),this._saveRange())},keyup:function(){this._saveRange(),this.save()},compositionend:function(){this._saveRange(),this.save()},mouseup:function(){this._saveRange(),this.save()},drop:function(){var e=this
this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e._filterNode(),e._saveRange(),e.save()},10)},paste:function(){var e=this
this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e._filterNode(),e._saveRange(),e.save()},10)},hide:function(){this.innerhidden=!0},show:function(){this.innerhidden=!1},isHidden:function(){return this.innerhidden}}})})
define("pages/modules/emoji_panel/emoji_panel.js",["pages/modules/common/emoji/emoji_data.js","pages/modules/emoji_panel/emoji_panel_data.js","pages/modules/emoji_panel/emoji_panel.tpl.js","pages/modules/emoji_panel/emoji_panel.css.js"],function(e,t,o){"use strict"
var p=e("pages/modules/common/emoji/emoji_data.js"),u=e("pages/modules/emoji_panel/emoji_panel_data.js"),i=e("pages/modules/emoji_panel/emoji_panel.tpl.js")
e("pages/modules/emoji_panel/emoji_panel.css.js"),Vue.component("mp-emoji-panel",{template:i,props:{emojiheight:{type:Number,default:21.25},rowcount:{type:Number,default:16},columncount:{type:Number,default:9},extclass:{type:String,defalut:""},showtype:{type:String,defalut:"click"},delay:{type:Number,default:1e3}},data:function(){for(var e=this.emojiheight,t=this.rowcount,o=this.columncount,i=[],a=0;a<u.length;a++)for(var n=0;n<p.length;n++)if(p[n].id===u[a]){i[a]=p[n]
break}for(var s=[],m=0;m<o;m++)for(var l=0;l<t;l++){var c=m*t+l
i[c]&&s.push({name:i[c].style,title:i[c].emoji?i[c].emoji:i[c].cn,bp:"background-position: 0 -"+c*e+"px;"})}return{edata:s,emojiPanelPopoverShow:!1}},mounted:function(){"click"===this.showtype&&document.addEventListener("click",this.handleDocumentClick)},methods:{select:function(e){this.$emit("select",{name:this.edata[e].name,title:this.edata[e].title,emojiHtml:'<img src="/mpres/zh_CN/htmledition/comm_htmledition/images/pic/common/pic_blank.gif"\n          class="icon_emotion_single '+this.edata[e].name+'" alt="mo-'+this.edata[e].title+'"></img>'})},show:function(){this.emojiPanelPopoverShow=!0},hide:function(){this.emojiPanelPopoverShow=!1},handleDocumentClick:function(e){var t=null
this.$slots.target&&this.$slots.target[0]&&(t=this.$slots.target[0].elm),t&&this.$el&&!this.$el.contains(e.target)&&!t.contains(e.target)&&this.$refs.emojiPanelPopover&&this.hide()},beforeDestroy:function(){document.removeEventListener("click",this.handleDocumentClick)}}})})
define("pages/modules/emoji_panel/emoji_panel_data.js",[],function(e,s,a){"use strict"
a.exports=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,"17_1",18,19,20,21,22,23,25,26,27,28,29,30,31,32,33,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,54,300,301,302,303,304,305,306,307,204,205,202,206,212,211,313,314,315,316,317,318,319,320,321,322,323,330,329,328,327,326,325,65,66,67,78,79,80,81,82,83,84,85,89,309,310,56,57,60,68,63,64,55,70,74,75,76,311,77,209,324,215,62,308,92,93,94,95]})
define("pages/modules/emoji_panel/emoji_panel.tpl.js",[],function(e,o,t){return'<mp-popover :trigger="showtype" position="up-left" wrap-class="weui-desktop-popover_emoji" :delay="delay" ref="emojiPanelPopover" v-model="emojiPanelPopoverShow">  <template slot="target">    <slot name="target"></slot>  </template>  <ul class="emotions" slot="content">    <li class="emotions_item" v-for="(item, index) in edata" @click="select(index)">      <span class="icon_emotion_sprite js_emotion_i" :style=\'item.bp\'></span>    </li>  </ul></mp-popover>'})
