define("pages/modules/media_dialog/image_dialog/image_crop.tpl.js",[],function(i,e,t){return'<div class="img_crop_area">    <div class="img_crop_edit_area">    <div class="img_crop_hd">      <h4 class="img_crop_title">剪裁封面</h4>    </div>    <div class="img_crop_wrp" style="background-color:white;">      <i v-if="src && !imgReady" class="weui-desktop-loading"></i>      <template v-if="src">        <span v-for="(item, idx) in ratio" :class="{\'img_crop_img_hidden\': ratioIdx !== idx}">          <img class="img_crop_img" v-show="imgReady" :src="src" @load="imgLoad(idx)" ref="img">        </span>      </template>    </div>    <div class="img_crop_ft">      <p v-if="ratio[ratioIdx] ? ratio[ratioIdx].cropDescription : false" class="img_crop_preview_desc">                {{ ratio[ratioIdx].cropDescription }}      </p>      <div class="weui-desktop-button-group" v-if="!shouldHideRatioTabs">        <button v-for="(item, idx) in ratio" @click="switchIdx(idx)" class="weui-desktop-btn weui-desktop-btn_default" :class="{\'weui-desktop-btn_current\': ratioIdx === idx}">{{ item.ratio | ratioText }}</button>      </div>    </div>  </div>    <div class="img_crop_preview_area">    <div class="img_crop_hd">      <h4 class="img_crop_title">预览封面</h4>    </div>    <ul class="img_crop_preview_list">            <li v-for="(item, idx) in ratioList" :data-ratio="item.ratio" @click="!item.isChildRatio ? switchIdx(idx) : null" :class="{\'current\': ratioIdx === idx, \'img_crop_preview_item\': 1}">        <span style="width: 130px" :style="{\'height\': \'calc(130px / \' + item.ratio + \')\'}" class="img_crop_preview_hd" ref="preview">          <img v-show="imgReady" style="width: 130px" :src="src" ref="previewImg">        </span>        <div class="img_crop_preview_bd">          <strong class="img_crop_preview_title">            {{ item.title }}（{{ item.ratio | ratioText }}）          </strong>          <p v-if="item.desc" class="img_crop_preview_desc">            {{ item.desc }}          </p>        </div>      </li>    </ul>  </div></div>'})
define("pages/modules/media_dialog/image_dialog/image_content.js",["3rd/jquery/jquery.2.1.4.js","pages/modules/media_dialog/image_dialog/image_crop.css.js","pages/modules/media_dialog/image_dialog/image_content.tpl.js"],function(e,t,i){"use strict"
var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]
for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}
function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t]
return i}return Array.from(e)}e("3rd/jquery/jquery.2.1.4.js"),e("pages/modules/media_dialog/image_dialog/image_crop.css.js")
var s=e("pages/modules/media_dialog/image_dialog/image_content.tpl.js")
Vue.component("mp-image-content",{template:s,props:{imgUrls:{type:Array,default:function(){return[]}},maxselect:{type:Number,default:1},needRestrict:{type:Boolean,default:!0},selectedImgs:{type:Array,default:function(){return[]}}},data:function(){return{noImgShow:!0,imgInfo:[]}},created:function(){},mounted:function(){this.getContentImg(this.imgUrls)},methods:{getContentImg:function(e){var i=this
e.forEach(function(t){console.log("imgs",t)
var e=new window.Image
e.onload=function(){this.onload=null
var e=!i.needRestrict||200<=this.width&&200<=this.height
i.imgInfo.push({isRemote:t.isRemote,uid:t.uid,url:t.url,show:e,selected:!1,format:i.getFormat(t.url)}),e&&(i.noImgShow=!e)},e.src=t.url})},selectImg:function(i){var e=n({},this.imgInfo[i]),t=[]
if(e.selected){this.imgInfo[i].selected=!1
var s=function(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i].url===t)return i
return-1}(this.selectedImgs,this.imgInfo[i].url)
t=[].concat(o(this.selectedImgs)),0<=s&&t.splice(s,1),this.$emit("select-change",t)}else 1===this.maxselect?(this.imgInfo=this.imgInfo.map(function(e,t){return e.selected=t===i,e}),e.selected=!0,t.push(e),this.$emit("select-change",t)):this.selectedImgs.length<this.maxselect&&(this.imgInfo[i].selected=!0,t=[].concat(o(this.selectedImgs),[this.imgInfo[i]]),this.$emit("select-change",t))},getFormat:function(e){return e.substring(e.search("wx_fmt=")).split("=")[1]}}})})
define("pages/modules/media_dialog/image_dialog/image_content.tpl.js",[],function(i,s,n){return'<div class="img_crop_panel">  <div class="appmsg_conent_img_container">      <div v-if="!imgInfo || imgInfo.length <= 0 || noImgShow" class="page_msg large simple default">        <div class="inner">          <span class="msg_icon_wrp"><i class="icon_msg info"></i></span>          <div class="msg_content">            <h4>正文中无可用做封面的图片</h4>            <p>封面图片必须为正文中使用过的图片，图片尺寸需大于200*200px，请在正文中插入图文后再选择封面图片</p>          </div>        </div>      </div>      <div v-else class="appmsg_content_img_hd">        <p class="appmsg_content_img_desc">请从正文使用过的图片中选择封面<span v-if="needRestrict" class="appmsg_content_img_tips">尺寸小于200*200的图片已被自动过滤</span></p>      </div>      <ul class="appmsg_content_img_list" v-show="imgInfo.length > 0">        <li v-for="(info, i) in imgInfo" :class="[\'appmsg_content_img_item\', !!info.isRemote ? \'loading_item\' : \'\', !!info.selected ? \'selected\' : \'\']" @click="selectImg(i)">          <div v-if="info.show">            <span class="appmsg_content_img cover" :data-remoteid="!!info.isRemote&&!!info.uid ? info.uid : \'\'" :style="\'background-image:url(\' + info.url + \');\'"></span>            <div class="card_mask_global apmsg_content_img_mask">              <i class="icon_card_selected_global"></i>            </div>                        <div v-if="!!info.isRemote" class="card_mask_global apmsg_content_loading_mask">              <i class="icon32_loading dark"></i>              <span class="vm_box"></span>            </div>          </div>          <div v-else>          </div>        </li>      </ul>  </div></div>'})
define("pages/modules/media_dialog/image_dialog/image_dialog.tpl.js",[],function(e,i,s){return'<mp-dialog  weui="true"  ref="dialog"  :title="title"  v-model="dialogShow"  :wrap-class="crop ? \'weui-desktop-dialog_img-picker weui-desktop-dialog_img-picker-with-crop\' : \'weui-desktop-dialog_img-picker\'"  @close="close"  rootElm="#vue_app">    <mp-step v-if="crop" :step="innerStep">    <mp-step-item v-if="fromcontent" title="从正文选择封面"></mp-step-item>    <mp-step-item v-else title="选择封面"></mp-step-item>    <mp-step-item title="裁切封面"></mp-step-item>  </mp-step>    <template v-if="fromcontent">    <mp-image-content v-show="innerStep === 1" :img-urls="contentimgUrls" :maxselect="maxselect" :need-restrict="contentRestrict" :selected-imgs="selectedImgs" @select-change="contentImgChange"></mp-image-content>  </template>    <template v-else>    <div v-show="innerStep === 1" class="weui-desktop-step__panel">      <div class="weui-desktop-img-picker weui-desktop-grid">                <div class="weui-desktop-grid__item weui-desktop-img-category">          <ul class="weui-desktop-menu">            <li v-for="(group, i) in groups" class="weui-desktop-menu__item" @click="switchGroup(group.id)">              <a href="javascript:;" :class="[\'weui-desktop-menu__link\', { \'weui-desktop-menu__link_current\': selectedGroup === group.id }, { \'weui-desktop-menu__link-self\': (group.id !== 0 && group.id !== 4 && group.id !== -1) }]">                <strong class="weui-desktop-img-category__title">{{group.name}}</strong>                <em v-show="group.id !== -1" class="weui-desktop-img-category__size">&#40;{{group.count}}&#41;</em>              </a>            </li>          </ul>          <div class="weui-desktop-img-category__add">            <mp-popover position="up-center" ref="addGroupPopover" :value="addGroupPopoverShow">              <a slot="target" href="javascript:;" @click.prevent="clickAddGroup">新建分组</a>              <div slot="content">                <mp-form ref="addGroupForm" :model="addGroupForm" weui="true" :rules="addGroupFormRules" @submit.native.prevent>                  <mp-form-item prop="groupName">                    <template slot="label">创建分组</template>                    <mp-input name="group_name" v-model="addGroupForm.groupName"  @input="groupNameInput"></mp-input>                  </mp-form-item>                </mp-form>              </div>              <div slot="bar">                <mp-button type="primary" :loading="addGroupLoading" @click="addGroup">确定</mp-button>                <mp-button type="default" @click="cancelAddGroup">取消</mp-button>              </div>            </mp-popover>          </div>        </div>                <div class="weui-desktop-grid__item">          <div class="weui-desktop-img-picker__list__area">                        <div class="weui-desktop-global-mod" v-if="selectedGroup === 4">              <template>                <div v-if="!hideRencentUsedTips" class="weui-desktop-msg weui-desktop-msg_mini weui-desktop-msg_temp" style="background:#F1F3F5">                  <div class="weui-desktop-msg__inner">                    <span class="weui-desktop-msg__hd">                      <i class="weui-desktop-icon-info weui-desktop-icon_msg"></i>                    </span>                    <div class="weui-desktop-msg__bd">                      <h4 class="weui-desktop-msg__title" style="padding-right: 2px;">图片素材新增系统分组“最近使用”(上限500张)，原系统分组“文章配图”不再自动添加图片，你可自行删除此分组或移动此分组里的历史图片。</h4>                      <span class="weui-desktop-msg__close-btn" style="top:21px" @click="closeRecentUsedTips">关闭</span>                    </div>                  </div>                </div>              </template>            </div>                        <div v-else-if="selectedGroup !== -1" class="weui-desktop-global-mod  weui-desktop-media-global-bar">              <div class="weui-desktop-global__extra">                                <mp-upload :key="selectedGroup" simple url="uploadImageLibFile" :maxfilenum="9999" extclass="weui-desktop-upload_global-media" multi :maxsize="10*1024*1024" :query="uploadQuery" :select="uploadSelect" @error="uploadError" @progress="uploadProgress" @complete="uploadComplete" @allcomplete="uploadAllComplete" :preview="null">                  <template slot="tips">                    <span class="weui-desktop-tips weui-desktop-tips_icon-after">                      <template v-if="$slots.uploadTips && $slots.uploadTips.length > 0">                        <slot name="uploadTips"></slot>，                      </template>                      {{waterStatus === 3 ? \'已关闭图片水印\' : \'已开启图片水印\'}}                      <mp-popover wrap-class="img_water" trigger="hover">                        <i class="icon-svg-common-ask" slot="target"></i>                        <div slot="content">                          <p v-if="waterStatus === 3">不添加水印</p>                          <p v-else-if="waterStatus === 2">水印类型：公众号名称</p>                          <p v-else-if="waterStatus === 1">水印类型：微信号</p>                          <p style="color: rgb(151,164,164);">                            <span v-if="waterStatus === 3">已关闭水印，所有上传的图片都不会带有水印。</span>                            <span v-else>已开启水印，所有上传的图片都会带有水印。</span>                            若需修改请前往<a target="_blank" :href="setWaterUrl">公众号设置/功能设置</a>设置图片水印                          </p>                        </div>                      </mp-popover>                    </span>                  </template>                </mp-upload>              </div>            </div>            <div :class="[\'weui-desktop-media-list-wrp\', { \'weui-desktop-img-picker__list__wrp\': !showSearchResult, \'mb-40\': showPublicPicRules }]" :style="dialogStyle" ref="imgPickerWrapper" @scroll="throttlePageScroll">              <div v-if="showLoading && selectedGroup !== -1" class="weui-desktop-media-tips weui-desktop-media-tips_loading">加载中</div>              <div v-else-if="(showSelectImg ? selectedImgs.length === 0 : imgs.length === 0) && selectedGroup !== -1" class="weui-desktop-media-tips">暂无数据</div>              <div v-else class="weui-desktop-img-picker__list">                                <template v-if="showSelectImg">                  <div v-for="(img, i) in selectedImgs" v-if="i < perpage" :key="img.fileId" :class="[\'weui-desktop-img-picker__item\', { selected : img.selected }]" @click.stop.prevent="selectImg({i: i, currentImg: img})">                    <template v-if="!img.loading && !img.msg">                      <i role="img" aria-describedby="图片描述" title="图片描述" class="weui-desktop-img-picker__img-thumb" :style="img.mediumUrl ? \'background-image: url(\' + img.mediumUrl + \');\' : \'background-image: url(\' + img.url + \');\'"></i>                      <span v-show="maxSelect > 1" :class="[\'image_dialog__checkbox\', img.selected ? \'selected\' : \'\']"></span>                                            <mp-tooltip v-if="img.isFromPublic" class="weui-desktop-img-public__star-bg r-42 no-visible" content="查看大图">                        <span class="weui-desktop-img-public__bg" slot="target" @click.stop="showGallery(i)">                          <i class="weui-desktop-img-public__common-icon weui-desktop-img-public__max-icon"></i>                        </span>                      </mp-tooltip>                                            <mp-tooltip v-if="img.isFromPublic" :class="[\'weui-desktop-img-public__star-bg\', { \'no-visible\': !img.isFavor }]" :content="img.isFavor ? \'取消收藏\' : \'收藏\'">                        <span class="weui-desktop-img-public__bg" slot="target" @click.stop="star({imgList: selectedImgs, idx: i})">                          <i :class="[\'weui-desktop-img-public__common-icon\', img.isFavor ? \'weui-desktop-img-public__star-icon\' : \'weui-desktop-img-public__unstar-icon\']"></i>                        </span>                      </mp-tooltip>                                            <div :class="[\'weui-desktop-img-picker__img-title\', { \'df\': img.isFromPublic }]">                        <div v-if="img.isFromPublic" :class="[\'weui-desktop-img-public__provider-logo\', { pexels: img.supplier === 1 }, { pickfoto: img.supplier === 3 }, { pixababy: img.supplier === 4 }]"></div>                        <i v-if="img.copyright_status === 2" class="icon_original accessed"></i>                        {{img.name}}                      </div>                    </template>                  </div>                                    <mp-gallery v-model="isGalleryShow" :imgs="selectedPublicImg | formatUrlList"></mp-gallery>                </template>                                                <template v-else-if="!showSelectImg && selectedGroup !== -1">                  <div v-for="(img, i) in imgs" v-if="i < perpage" :key="img.fileId" :class="[\'weui-desktop-img-picker__item\', { selected : img.selected, disabled: !img.selected && !canSelect }]" @click.stop.prevent="selectImg({i: i, currentImg: img})">                    <mp-upload-item v-if="img.loading || img.msg" :file="img" @remove="removeImgItem(img, i)"></mp-upload-item>                    <template v-if="!img.loading && !img.msg">                      <i role="img" aria-describedby="图片描述" title="图片描述" class="weui-desktop-img-picker__img-thumb" :style="img.url?\'background-image:url(\' + img.url + \');\':\'\'">                        <span v-show="maxSelect > 1" :class="[\'image_dialog__checkbox\', img.selected ? \'selected\' : \'\']"></span>                      </i>                      <strong class="weui-desktop-img-picker__img-title"><i v-if="img.copyright_status === 2" class="icon_original accessed"></i>{{img.name}}</strong>                    </template>                  </div>                </template>                                                <template v-else="selectedGroup === -1">                                    <template v-if="showPublicPicRules">                    <p class="weui-desktop-img-public__rules-title">微信公众平台公共图片库功能使用条款</p>                    <div class="weui-desktop-img-public__rules-content">                      <p class="deal_section">为使用微信公众平台公共图片库功能（以下简称“公共图片库”），你应当阅读并遵守《微信公众平台公共图片库功能使用条款》（以下简称“本条款”），本条款为<a target=\'_blank\' href=\'https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=1503979103&version=1&lang=zh_CN&platform=2\'>《微信公众平台服务协议》</a>的特别功能服务条款。</p>                      <div class="deal_section">                        <p class="deal_section_title">1. 术语含义</p>                        <p>如无特别说明，下列术语在本条款中的含义为：</p>                        <p>1.1 微信公众平台公共图片库：指腾讯通过微信公众平台向微信公众帐号用户提供的来源于第三方图库网站的图片素材集合。简称为“公共图片库”。</p>                        <p>1.2 微信公众平台公共图片库素材：指在微信公众平台公共图片库中的单张或多张图片素材。简称为“图片素材”。</p>                        <p>1.3 微信公众平台公共图片库用户：指搜索、查看、筛选、收藏、使用微信公众平台公共图片库图片素材的微信公众帐号用户。视情况简称为“你”、“公共图片库用户”或者“公众帐号用户”。</p>                        <p>1.4 微信用户：指使用微信客户端软件获取微信公众平台相关服务的用户。</p>                        <p>1.5 腾讯：是指腾讯公司及其相关服务可能存在的运营关联单位。</p>                      </div>                      <div class="deal_section">                        <p class="deal_section_title">2. 关于公共图片库</p>                        <p>2.1 公共图片库是腾讯以微信公众平台为技术基础开发的向微信公众帐号用户提供的来源于第三方图库网站的图片素材库。</p>                        <p>2.2 你可以登录微信公众帐号，在选择图片功能下使用公共图片库，你可在公共图片库中进行搜索、查看、筛选、收藏、使用图片素材。</p>                        <p>2.3 公共图片库的搜索服务及图片素材由微信公众平台通过腾讯正版图库直通车（APE图库）版权授权取得，及第三方图库网站（包括<a target=\'_blank\' href=\'https://www.pexels.com/zh-cn/license\'>Pexles</a>、<a target=\'_blank\' href=\'https://pixabay.com/service/license\'>Pixabay</a>，可点击查看使用协议）提供。其中APE图库图片有充分的版权授权，第三方图库网站图片的使用遵循其网站协议。不同图库网站的图片使用规则有所差异，你应当阅读并遵循。腾讯仅提供公共图片库的技术服务。通过此功能获取的图片仅限于在微信公众平台场景内使用。</p>                        <p>2.4 腾讯有权决定可以开通公共图片库的公众帐号用户的范围和条件等。</p>                      </div>                      <div class="deal_section">                        <p class="deal_section_title">3. 公共图片库用户的权利和义务</p>                        <p>3.1你的行为应当符合《微信公众平台服务协议》和《微信公众平台运营规范》中对于用户行为规范的相关约定。</p>                        <p>3.2 你应当在合法合规的前提下使用公共图片库，不得将公共图片库用于违反法律法规、政策及违背公序良俗、社会公德或干扰微信公众平台正常运营和侵犯其他用户或第三方合法权益的目的。</p>                        <p>3.3 你知悉并同意，公共图片库的图片素材来源于第三方图库网站，腾讯并非公共图片库的权利方，你使用公众图片库功能并不代表腾讯认可或担保你所使用的图片素材符合法律规定或不侵犯第三方的合法权利。</p>                        <p>3.4 你知悉并同意，腾讯在收到图片版权方或微信用户投诉图片素材的通知后，如通过核实认为你使用的图片素材违反法律规定或侵犯第三方合法权利的，腾讯将删除涉嫌违规的图片素材或删除包含图片素材的作品，并将处理结果向你通知。尽管如此，你对图片的使用在极端情况下仍有可能被图片版权方主张侵权并且最终侵权成立，对此你应当充分的知悉并同意。</p>                        <p>3.5 如涉及到免费的第三方图库，其图片内容涉及的版权之外的相关权益，如肖像权、商标权、隐私权等，腾讯均不作保证或担保亦没有能力作核查，你应当自行核查是否存在侵犯他人权益或未经授权的内容，并联系权利方取得授权，对此你应当充分的知悉并同意。</p>                        <p>3.6 你自愿使用公共图片库，腾讯不对你使用公共图片库图片素材的关注量、阅读量、最终所得等作任何承诺。</p>                      </div>                      <div class="deal_section">                        <p class="deal_section_title">4. 腾讯的权利和义务</p>                        <p>4.1腾讯在目前技术水平下，最大程度地保障公共图片库的正常运行，以维护你的利益。</p>                        <p>4.2腾讯有权根据运营情况调整或暂停公共图片库功能，并及时向你通知。</p>                        <p>4.3腾讯作为提供信息发布功能的中立平台方，为公共图片库的顺利使用提供技术支持。</p>                        <p>4.4你理解并同意，为保障良好的用户体验，腾讯会在收到图片版权方或微信用户的投诉通知后，要求投诉方如实填写投诉内容、侵权类型和具体原因、投诉理由，并提供权利证明文件、相关机构颁发的合法证书、授权文件等。腾讯会核实投诉是否成立，如投诉成立，腾讯将对涉嫌违规的素材图片或包含素材图片的作品采取删除、屏蔽、断开链接等必要措施。</p>                        <p>4.5你理解并同意，如你使用公众库图片素材与其他第三方产生争议或法律纠纷，你需自行承担由此导致的法律责任，腾讯无权也无依据参与你与第三方的争议解决。</p>                      </div>                      <div class="deal_section">                        <p class="deal_section_title">5. 其它</p>                        <p>5.1 本条款内容同时包括腾讯的各项制度规范、其它本条款附件中的协议或规则、腾讯可能不断发布的关于公共图片库的其他相关协议、规则等内容。上述内容一经正式发布，即为本条款不可分割的组成部分，你同样应当遵守。上述内容与本条款存在冲突的，以本条款为准。一经注册或使用本条款下任何服务，即视为你已阅读并同意接受本条款及上述内容的约束。腾讯有权在必要时单方修改本条款或上述内容，相关内容变更后，如果你继续使用公共图片库，即视为你已接受修改后的相关内容。如果你不接受修改后的相关内容，应当停止使用相关功能。</p>                        <p>5.2 本条款签订地为中华人民共和国广东省深圳市南山区。</p>                        <p>5.3 本条款的成立、生效、履行、解释及纠纷解决，适用中华人民共和国大陆地区法律（不包括冲突法）。</p>                        <p>5.4 若你和腾讯之间发生任何纠纷或争议，首先应友好协商解决；协商不成功的，双方均同意将纠纷或争议提交本条款签订地有管辖权的人民法院解决。</p>                        <p>5.5 本条款所有条款的标题仅为阅读方便，本身并无实际涵义，不能作为本条款涵义解释的依据。（完）</p>                      </div>                      <div class="deal_section">微信团队</div>                    </div>                    <mp-checkbox v-model="hasAgreePicRules" class="weui-desktop-img-public__rules-agree" @change="switchAgreeStatus">我已阅读并同意遵守<a target=\'_blank\' href=\'https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=11608199766csKQC&version=1&lang=zh_CN&platform=2\'>《微信公众平台公共图片库使用条款》</a></mp-checkbox>                  </template>                  <template v-else>                                        <div :class="{ \'weui-desktop-img-public__search-wrp\': showSearchResult }">                      <mp-search                         v-model="searchKeyword"                        :class="[showSearchResult ? \'weui-desktop-img-public__searching\' : \'weui-desktop-img-public__search\', !showSearchResult ? (imgs.length ? \'weui-desktop-img-public__search_favor\' : \'weui-desktop-img-public__search_nofavor\') : \'\']"                        placeholder="输入关键词查找图片"                        :clear="true"                        @search="searchPublicPic"                        @clear="clearSearchCtx"></mp-search>                      <p v-show="!showSearchResult" class="weui-desktop-img-public__search-tips">搜索服务及图片库由{{serviceProviders}}等提供</p>                      <mp-dropdown                         v-show="showSearchResult"                         v-model="selectedType"                         class="weui-desktop-img-public__filter_shape"                        :options="publicPicShapes"                         @change="changePicShape"></mp-dropdown>                      <div v-show="showSearchResult" class="weui-desktop-img-public__rules">                        <i class="weui-desktop-document_link"></i>                        <a href="https://mp.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=11608199766csKQC&version=1&lang=zh_CN&platform=2" target="_blank">公共图片库使用条款</a>                      </div>                    </div>                                        <div v-if="imgs.length" :class="[\'weui-desktop-img-public__favor-pic__wrp\', { \'weui-desktop-img-public__search-pic__wrp\': showSearchResult }]">                      <p v-show="!showSearchResult" class="weui-desktop-img-public__favor-pic__tips">我收藏的图片</p>                      <div class="weui-desktop-img-public__favor-pic__list">                        <div v-for="(img, i) in imgs"                          :key="img.fileId"                          ref="publicPicList"                          :class="[\'weui-desktop-img-picker__item\', { selected : img.selected, disabled: !img.selected && !canSelect, error: img.error  }]"                          @click.stop.prevent="selectImg({i: i, currentImg: img})"                        >                          <i role="img" aria-describedby="图片描述" title="图片描述" class="weui-desktop-img-picker__img-thumb" :style="img.mediumUrl ? \'background-image: url(\' + img.mediumUrl + \');\' : \'\'">                                                        <div v-if="img.error" class="weui-desktop-img-public__error">图片链接已失效</div>                          </i>                          <template v-if="!img.error">                                                        <span v-if="maxSelect > 1" :class="[\'image_dialog__checkbox\', img.selected ? \'selected\' : \'\']"></span>                                                        <mp-tooltip class="weui-desktop-img-public__star-bg r-46 no-visible" content="查看大图">                              <span class="weui-desktop-img-public__bg" slot="target" @click.stop="showPubGallery(i)">                                <i class="weui-desktop-img-public__common-icon weui-desktop-img-public__max-icon"></i>                              </span>                            </mp-tooltip>                          </template>                                                    <mp-tooltip v-if="!img.error || !showSearchResult" :class="[\'weui-desktop-img-public__star-bg\', { \'no-visible\': !img.isFavor }]" :content="img.isFavor ? \'取消收藏\' : \'收藏\'">                            <span class="weui-desktop-img-public__bg" slot="target" @click.stop="star({imgList: imgs, idx: i})">                              <i :class="[\'weui-desktop-img-public__common-icon\', img.isFavor ? \'weui-desktop-img-public__star-icon\' : \'weui-desktop-img-public__unstar-icon\']"></i>                            </span>                          </mp-tooltip>                                                    <div class="weui-desktop-img-public__provider-info">                            <div class="weui-desktop-img-public__provider-info-wrp">                              <div :class="[\'weui-desktop-img-public__provider-logo\', { pexels: img.supplier === 1 }, { pickfoto: img.supplier === 3 }, { pixababy: img.supplier === 4 }]"></div>                              <span> {{img.supplier | formatProvider}} </span>                            </div>                          </div>                        </div>                      </div>                                            <mp-gallery v-model="isPublicGalleryShow" :imgs="imgs | formatUrlList" :selected="selectedPublicGalleryIdx" @change="handlePicIdxChange"></mp-gallery>                    </div>                                        <div v-else-if="showSearchResult && !showSearchLoading" class="weui-desktop-img-public__no-img">暂无匹配图片</div>                                        <div v-show="showSearchLoading" ref="searchLoading" :class="[\'weui-desktop-loadmore\', \'weui-desktop-img-public__loading_text\', { \'mt-44\': !imgs.length }]">                      <i class="weui-desktop-loading"></i>                      正在加载                    </div>                  </template>                </template>                              </div>            </div>            <mp-pagination v-show="!showSelectImg && selectedGroup !== -1" :total-num="totalnum" :per-page="perpage" :current="currentPage" @page-change="changePage"></mp-pagination>          </div>        </div>      </div>    </div>  </template>    <div v-if="crop && innerStep === 2" class="weui-desktop-step__panel">    <mp-image-crop v-if="innerStep === 2" :src="cropImg.url" :ratio="ratio" :crop-info="cropperInfo" :should-hide-ratio-tabs="shouldHideRatioTabs" @change="cropChange">          </mp-image-crop>  </div>  <template slot="footer">    <div v-if="!fromcontent && innerStep === 1 && maxSelect > 1" class="weui-desktop-img-picker__counter">      <span>已选择 <a href="javascript:" @click="changeViewToSelectedImg">{{selectedImgs | getSelectedImgLength}} / {{maxSelect}}  项</a></span>      <span v-if="showSelectImg"><a href="javascript:" @click="changeViewToAllImg">返回全部</a></span>    </div>    <mp-button v-if="showAgreeBtn && selectedGroup === -1" type="primary" :disabled="!hasAgreePicRules" :loading="agreeBtnLoading" @click="agreeStatement">同意并继续</mp-button>    <mp-button v-else-if="innerStep === 1" type="primary" :disabled="disable" :loading="btnLoading" @click="ok">{{ crop ? \'下一步\' : \'确定\' }}</mp-button>    <mp-button v-if="!crop" @click="close">取消</mp-button>    <mp-button v-show="innerStep === 2" @click="prevStep">上一步</mp-button>    <mp-button v-show="innerStep === 2" type="primary" @click="ok">完成</mp-button>  </template></mp-dialog>'})
define("pages/modules/media_dialog/link_dialog/linkDialog4Web1.js",["pages/modules/media_dialog/link_dialog/link_dialog.js"],function(i,n,e){"use strict"
function l(){return{title:"编辑超链接",isShow:!1,defaultShow:!1,linkinfo:null,type:["innerlink","outerlink"],nickname:window.wx.commonData.data.nick_name,linkUrl:""}}e.exports={getParams:l,bindEvent:function(n){n.eventBus.$on("requireLinkDialog",function(){n.isRequired||(i("pages/modules/media_dialog/link_dialog/link_dialog.js"),n.isRequired=!0)}),n.eventBus.$on("showLinkDialog",function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}
n.eventBus.$emit("requireLinkDialog"),function(i,n){var e=l()
for(var a in n)void 0!==e[a]&&(e[a]=n[a])
for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i.params[o]=e[o])
i.params.isShow=!0,i.params.defaultShow=!0}(n,i),n.eventBus.$emit("update-component",{key:"mp-link-dialog",params:n.params})})},close:function(i){i.eventBus.$emit("showLinkDialog_callback",i.data)}}})
define("pages/modules/media_dialog/link_dialog/link_dialog.js",["vue-weui/src/dialog/dialog.js","vue-weui/src/tab/tab.js","pages/modules/media_dialog/link_dialog/link_dialog.css.js","pages/modules/media_dialog/link_dialog/inner_link.js","pages/modules/media_dialog/link_dialog/outer_link.js","pages/modules/media_dialog/link_dialog/link_dialog.tpl.js","pages/modules/utils/object.js"],function(i,e,t){"use strict"
i("vue-weui/src/dialog/dialog.js"),i("vue-weui/src/tab/tab.js"),i("pages/modules/media_dialog/link_dialog/link_dialog.css.js"),i("pages/modules/media_dialog/link_dialog/inner_link.js"),i("pages/modules/media_dialog/link_dialog/outer_link.js")
var l=i("pages/modules/media_dialog/link_dialog/link_dialog.tpl.js"),n=i("pages/modules/utils/object.js").assign,a="innerlink"
Vue.component("mp-link-dialog",{template:l,props:{title:{type:String,default:"添加链接"},value:{type:Boolean,default:!1},linkinfo:{type:Object,default:null},type:{type:Array,default:function(){return[a,"outerlink"]}},nickname:{type:String,default:""},linkUrl:String},data:function(){var i={type:a,title:""}
this.linkinfo&&(i=n(i,this.linkinfo))
var e=!!this.linkinfo,t={innerlink:"公众号文章链接",outerlink:"外部链接"}
return{tabs:this.type.map(function(i){return{id:i,name:t[i]}}),selectedTab:this.linkinfo&&this.linkinfo.type?this.linkinfo.type:a,isEdit:e,dialogShow:!1,searchResult:i}},watch:{value:function(i){!0===i?this.show():this.hide()},dialogShow:function(i){this.$emit("input",i)}},mounted:function(){!0===this.value&&this.show()},methods:{show:function(){!0!==this.dialogShow&&(this.dialogShow=!0)},hide:function(){!1!==this.dialogShow&&(this.dialogShow=!1)},onDialogClose:function(){this.hide(),this.$emit("cancel")},onDialogOK:function(){var e=this
this.selectedTab===a?this.$refs.innerLink.getData().then(function(i){i.tab=e.selectedTab,e.$emit("select",i),e.hide()}):"outerlink"===this.selectedTab&&this.$refs.outerLink.getData().then(function(i){i.tab=e.selectedTab,e.$emit("select",i),e.hide()})},dialogCallback:function(){this.$emit("select",this.searchResult),this.hide()},changeTab:function(i){this.selectedTab=i}}})})
define("pages/modules/media_dialog/link_dialog/link_dialog.css.js", [], function (require, exports, module){module.exports = "@grid BreakPoints: {  xs: 0;  sm: 576px;  md: 768px;  lg: 992px;  xl: 1200px;}@container MaxWidths: {  xs: auto;  sm: 540px;  md: 720px;  lg: 960px;  xl: 1140px;}/*How to usefont-family: 'wechatnum';*/.weui-desktop-search__wrp {  display: block;  width: auto;}.weui-desktop-search__panel {  background: var(--weuiDesktopBtnPrimaryColor);  box-shadow: 0 1px 20px 0 rgba(0, 0, 0, 0.1);  border-radius: var(--weuiDesktop_cardBorderRadius);  overflow: auto;  max-height: 200px;}.weui-desktop-search__loadmore {  padding: 20px;  text-align: center;}.weui-desktop-search__loadmore .weui-desktop-loading {  width: 32px;  height: 32px;}.weui-desktop-link-dialog .weui-desktop-media__list-wrp + .weui-desktop-pagination {  padding-bottom: 0;}.link_dialog_panel {  padding: 40px 40px 0;  height: 454px;  overflow-y: auto;  box-sizing: border-box;}.link_dialog_panel .weui-desktop-form__label {  width: 4.1em;}.link_dialog_panel .weui-desktop-form__control-group:last-child {  margin-bottom: 0;}.inner_link_account_item {  padding: 12px;  cursor: pointer;  color: var(--weuiDesktop_FG_Text_descColor);}.inner_link_account_avatar {  width: 36px;  height: 36px;  vertical-align: middle;  -webkit-border-radius: 50px;  border-radius: 50px;}.inner_link_account_nickname {  font-weight: 400;  margin-left: 1em;  display: inline-block;  color: var(--weuiDesktop_FG_Text_globalColor);  vertical-align: middle;  max-width: 8em;  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;}.inner_link_account_wechat {  font-style: normal;  margin-left: 1em;  display: inline-block;  vertical-align: middle;  max-width: 12em;  width: auto;  overflow: hidden;  text-overflow: ellipsis;  white-space: nowrap;  word-wrap: normal;}.inner_link_account_msg .weui-desktop-link-btn {  vertical-align: baseline;  margin-left: 1em;}.inner_link_article_area .weui-desktop-media__list-wrp {  max-height: none;  margin-top: 10px;}.inner_link_article_area .weui-desktop-media-tips {  padding: 20px;  box-sizing: border-box;}.inner_link_article_item {  display: block;  border-bottom: 1px solid var(--weuiDesktop_separateColor);  padding: 10px;  cursor: pointer;  transition: background .3s;}.inner_link_article_item .weui-desktop-form__check-label {  margin-top: -4px;}.inner_link_article_item .weui-desktop-vm_default:first-child {  vertical-align: top;}.inner_link_article_item .weui-desktop-vm_default:last-child {  vertical-align: bottom;  opacity: 0;  visibility: hidden;  -webkit-transition: opacity .3s;  transition: opacity .3s;}.inner_link_article_item:hover {  background-color: var(--weuiDesktop_globalBgColor);}.inner_link_article_item:hover .weui-desktop-vm_default:last-child {  opacity: 1;  visibility: visible;}.inner_link_article_item:last-child {  border-bottom: none;}.inner_link_article_title {  font-weight: 400;  overflow: hidden;  text-overflow: ellipsis;  display: -webkit-box;  -webkit-box-orient: vertical;  -webkit-line-clamp: 1;  color: var(--weuiDesktop_FG_Text_globalColor);}.inner_link_article_title em {  font-style: normal;  color: var(--weuiDesktop_themeColor);}.inner_link_article_date {  color: var(--weuiDesktop_FG_Text_descColor);}";});define("pages/modules/media_dialog/link_dialog/inner_link.js",["vue-weui/src/form/form.js","vue-weui/src/form/form_item.js","vue-weui/src/input/input.js","vue-weui/src/button/button.js","vue-weui/src/popover/popover.js","vue-weui/src/radio/radio.js","vue-weui/src/radio/radio_group.js","vue-weui/src/search/search.js","pages/modules/media_dialog/link_dialog/inner_link.tpl.js","pages/modules/utils/cgi.js","pages/modules/utils/string.js","pages/modules/utils/time.js"],function(e,i,t){"use strict"
var s=function(e,i){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,i){var t=[],s=!0,r=!1,a=void 0
try{for(var n,h=e[Symbol.iterator]();!(s=(n=h.next()).done)&&(t.push(n.value),!i||t.length!==i);s=!0);}catch(e){r=!0,a=e}finally{try{!s&&h.return&&h.return()}finally{if(r)throw a}}return t}(e,i)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}
e("vue-weui/src/form/form.js"),e("vue-weui/src/form/form_item.js"),e("vue-weui/src/input/input.js"),e("vue-weui/src/button/button.js"),e("vue-weui/src/popover/popover.js"),e("vue-weui/src/radio/radio.js"),e("vue-weui/src/radio/radio_group.js"),e("vue-weui/src/search/search.js")
var r=e("pages/modules/media_dialog/link_dialog/inner_link.tpl.js"),a=e("pages/modules/utils/cgi.js"),n=e("pages/modules/utils/string.js"),h=e("pages/modules/utils/time.js").formatDate
function c(s){return function(e){for(var i=s,t=0;t<e.length;t++)i=(i<<5)+i+e.charCodeAt(t),i&=2147483647
return i}}var o=c(5200),l=c(5210)
Vue.component("mp-inner-link",{template:r,props:{nickname:{type:String,default:""},linkTitle:{type:String,default:""},linkUrl:String},data:function(){return{linkTitleRule:{required:!0,message:"请输入链接标题",trigger:"none"},linkUrlRule:[{validator:function(e,i,t){return i?/http(s)?:\/\/mp\.weixin\.qq\.com\/(s\?|s\/|mp\/appmsg\/show\?)/.test(i)||/http(s)?:\/\/mp\.weixin\.qq\.com\/mp\/qa\?/.test(i)||/http(s)?:\/\/mp\.weixin\.qq\.com\/mp\/homepage\?/.test(i)||/http(s)?:\/\/mp\.weixin\.qq\.com\/mp\/appmsgalbum\?/.test(i)?/^https?\:\/\/mp\.weixin\.qq\.com\/.*[\?&]tempkey=/.test(i)?t(new Error("不支持插入公众号文章的预览链接，请输入正式链接")):t():t(new Error("请输入公众号相关链接，并以http://或https://开头")):t(new Error("链接地址不能为空，请输入以http://或https://开头的地址"))},trigger:"none"}],innerLinkRules:{},innerLinkModel:{linkTitle:this.linkTitle,type:"search",linkUrl:this.linkUrl||""},innerLinkPlaceholder:"如不填写会默认填入选取文章的标题",defaultBizAvatar:"https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0?wx_fmt=png",disabledInput:0<this.linkTitle.length,chooseMsgAid:null,chooseMsgData:null,bizSearchNameFakeId:"",bizSearchName:this.nickname,bizSearchCountPerPage:5,bizSearchLoading:!0,bizSearchResult:[],bizSearchCurrentPage:1,bizSearchStatus:"normal",selectSearchBiz:!0,showBizSearchResult:!1,msgSearchName:"",msgSearchCountPerPage:5,msgSearchTotal:0,msgSearchLoading:!1,msgSearchResult:[],msgSearchCurrentPage:1,showMsgSearchResult:!1,showOprIdx:null,searchingBiz:!1,timeLimit:0,searchLoadingData:!1,canBizSearch:!0}},watch:{},mounted:function(){this.searchMsg()},methods:{searchBiz:function(){1e3<Date.now()-this.timeLimit&&this.bizSearchName.length&&(this.msgSearchName="",this.timeLimit=Date.now(),this.showBizSearchResult=!0,this.canBizSearch=!0,this.bizSearchResult=[],this.bizPageChange({currentPage:1}))},bizPageChange:function(e){var t=this,i=e.currentPage
this.canBizSearch&&(this.bizSearchLoading=!0,this.searchLoadingData=!0,this.bizSearchCurrentPage=i,a.get({url:"/cgi-bin/searchbiz?action=search_biz&begin="+(i-1)*this.bizSearchCountPerPage+"&count="+this.bizSearchCountPerPage+"&query="+encodeURIComponent(this.bizSearchName)},function(e){if(t.searchLoadingData=!1,e&&e.base_resp&&0===e.base_resp.ret){var i=e.total
t.bizSearchResult=t.bizSearchResult.concat(e.list),0===i&&(t.bizSearchLoading=!1,t.canBizSearch=!1),0===t.bizSearchResult.length&&(t.showBizSearchResult=!1,t.bizSearchStatus="warn"),i<=5&&(t.bizSearchLoading=!1)}else t.$tipsErr("系统错误，请稍后重试")}))},searchMsg:function(){this.chooseMsgData=null,this.chooseMsgAid=null,this.showMsgSearchResult=!0,this.msgPageChange({currentPage:1})},msgPageChange:function(e){var i=this,t=e.currentPage
this.msgSearchLoading=!0,this.msgSearchCurrentPage=t,a.get({url:"/cgi-bin/appmsg?action=list_ex&begin="+(t-1)*this.msgSearchCountPerPage+"&count="+this.msgSearchCountPerPage+"&fakeid="+this.bizSearchNameFakeId+"&type=9&query="+encodeURIComponent(this.msgSearchName)},function(e){i.msgSearchLoading=!1,e&&e.base_resp&&0===e.base_resp.ret?(i.msgSearchTotal=e.app_msg_cnt,i.msgSearchResult=e.app_msg_list.map(function(e){var i=o(e.title),t=l(e.title)
return e.title=e.title.replace(/<a[^>]*?>(.*?)<\/a>/gi,function(e,i){return i}).replace(/<em>/gi,i).replace(/<\/em>/gi,t).replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(new RegExp(i,"ig"),"<em>").replace(new RegExp(t,"ig"),"</em>"),e})):i.$tipsErr("系统错误，请稍后重试")})},clearBizSearch:function(){this.showBizSearchResult=!1,this.bizSearchName="",this.canBizSearch=!0,this.bizSearchLoading=!1,this.searchLoadingData=!1,this.bizSearchResult=[],this.bizSearchCurrentPage=1},clearMsgSearch:function(){this.showMsgSearchResult=!1,this.msgSearchName="",this.msgSearchTotal=0,this.msgSearchLoading=!1,this.msgSearchResult=[],this.msgSearchCurrentPage=1,this.chooseMsgAid=null,this.searchMsg()},chooseBiz:function(e){this.bizSearchName=this.bizSearchResult[e].nickname,this.bizSearchNameFakeId=this.bizSearchResult[e].fakeid,this.showBizSearchResult=!1,this.searchingBiz=!1,this.searchMsg()},chooseMsg:function(e,i){s(i,1)[0]&&(this.chooseMsgData=this.msgSearchResult[e],console.log(this.chooseMsgData))},showMsgOpr:function(e){this.showOprIdx=e},hideMsgOpr:function(){this.showOprIdx=null},gotoSearchBiz:function(){this.bizSearchName="",this.searchingBiz=!0,this.chooseMsgData=null},onBizSearchScroll:function(e){var i=e.target
i.scrollTop+i.clientHeight+70>i.scrollHeight&&!this.searchLoadingData&&this.bizPageChange({currentPage:this.bizSearchCurrentPage+1})},getData:function(){var s=this
return new Promise(function(t){s.$refs.innerLinkForm.validate(function(e){if(e){if("search"===s.innerLinkModel.type&&!s.chooseMsgData)return s.$tipsErr("请选择公众号文章"),!1
var i={target:"_blank",href:"",textValue:s.innerLinkModel.linkTitle}
"url"===s.innerLinkModel.type?i.href=s.innerLinkModel.linkUrl:"search"===s.innerLinkModel.type&&(i.href=s.chooseMsgData.link,i["data-itemshowtype"]=s.chooseMsgData.item_show_type,i.textValue.length||(i.textValue=s.chooseMsgData.title.replace(/<\/?em[^>]*?>/gi,""),20<n.htmlDecode(i.textValue).length&&10==+s.chooseMsgData.item_show_type&&(i.textValue=n.htmlEncode(n.htmlDecode(i.textValue).substr(0,20))+"..."))),t(i)}return!1})})},searchInput:function(e){this.bizSearchStatus="normal",0===e.length&&(this.showBizSearchResult=!1,this.bizSearchResult=[])},msgSearchInput:function(e){0===e.length&&(this.showMsgSearchResult=!1,this.msgSearchName="",this.msgSearchTotal=0,this.msgSearchLoading=!1,this.msgSearchResult=[],this.msgSearchCurrentPage=1,this.chooseMsgAid=null,this.searchMsg())},innerLinkTypeChange:function(e){var i=this
"url"===e?(this.innerLinkRules={linkTitle:this.linkTitleRule,linkUrl:this.linkUrlRule},this.innerLinkPlaceholder="请输入链接标题"):"search"===e&&(this.innerLinkRules={},this.innerLinkPlaceholder="如不填写会默认填入选取文章的标题",window.setTimeout(function(){i.$refs.innerLinkForm.validate()},0))}},filters:{formatDate:function(e){return h(e,"YYYY-MM-DD")}}})})
define("pages/modules/media_dialog/link_dialog/inner_link.tpl.js",[],function(e,i,a){return'<mp-form  ref="innerLinkForm"  :rules="innerLinkRules"  :model="innerLinkModel"  :validate-on-rule-change="false"  @submit.native.prevent="test">  <mp-form-item prop="linkTitle">    <template slot="label">链接标题</template>    <template>      <mp-input        ref="linkInput"        filter="trim"        v-model.trim="innerLinkModel.linkTitle"        :placeholder="innerLinkPlaceholder"        :disabled="disabledInput">      </mp-input>    </template>  </mp-form-item>  <mp-form-item class="weui-desktop-form__control-group_offset" prop="type">    <template slot="label">链接内容</template>    <mp-radio-group v-model="innerLinkModel.type" @change="innerLinkTypeChange">      <mp-radio value="search">公众号文章</mp-radio>      <mp-radio value="url">输入链接</mp-radio>    </mp-radio-group>  </mp-form-item>    <template v-if="innerLinkModel.type === \'search\'">    <mp-form-item>      <template slot="label">公众号</template>      <div class="inner_link_account_area">                <template v-if="searchingBiz">          <div class="weui-desktop-search__wrp">            <mp-search              :clear="true"              filter="trim"              placeholder="输入文章来源的公众号名称或微信号，回车进行搜索"              v-model.trim="bizSearchName"              @input="searchInput"              @search="searchBiz"              @clear="clearBizSearch"              :status="bizSearchStatus">              <template slot="message" v-if="bizSearchStatus === \'warn\'">该公众号不存在</template>            </mp-search>            <div              class="weui-desktop-search__panel"              v-if="showBizSearchResult"              @scroll="onBizSearchScroll">                            <ul v-if="bizSearchResult.length > 0" class="inner_link_account_list">                <li                  class="inner_link_account_item"                  v-for="(biz, bizIdx) in bizSearchResult"                  :key="bizIdx"                  @click="chooseBiz(bizIdx)">                  <div class="weui-desktop-vm_primary">                    <img class="inner_link_account_avatar" :src="biz.round_head_img || defaultBizAvatar">                    <strong class="inner_link_account_nickname">{{ biz.nickname }}</strong>                    <i class="inner_link_account_wechat">微信号：{{ biz.alias || \'未设置\' }}</i>                  </div>                  <div class="weui-desktop-vm_default inner_link_account_type">{{ (biz.service_type === 0 || biz.service_type === 1) ? \'订阅号\' : \'服务号\' }}</div>                </li>              </ul>              <div v-if="bizSearchLoading" class="weui-desktop-search__loadmore">                <i class="weui-desktop-loading"></i>              </div>                          </div>          </div>        </template>                <template v-if="!searchingBiz">          <p class="inner_link_account_msg">            {{ bizSearchName }}<mp-button class="weui-desktop-link-btn weui-desktop-link" @click="gotoSearchBiz">选择其他公众号</mp-button>          </p>        </template>      </div>    </mp-form-item>    <mp-form-item v-if="!searchingBiz">      <template slot="label">选择文章</template>      <div class="inner_link_article_area">        <mp-search          :clear="true"          filter="trim"          placeholder="输入文章名查找公众号群发过的文章"          v-model.trim="msgSearchName"          @input="msgSearchInput"          @search="searchMsg"          @clear="clearMsgSearch"></mp-search>        <div v-if="showMsgSearchResult" class="weui-desktop-media__list-wrp">          <div v-if="msgSearchLoading" class="weui-desktop-media-tips"><i class="weui-desktop-loading"></i></div>          <div v-else-if="msgSearchResult.length" class="inner_link_article_list" @mouseleave="hideMsgOpr">            <mp-radio-group v-model="chooseMsgAid">              <label                class="inner_link_article_item"                v-for="(article, articleIdx) in msgSearchResult"                :key="articleIdx"                @mouseenter="showMsgOpr(articleIdx)">                <span class="weui-desktop-vm_default">                  <mp-radio :value="article.aid" @change="chooseMsg(articleIdx, arguments)">                  </mp-radio>                </span>                <div class="weui-desktop-vm_primary">                  <div class="inner_link_article_title">                                        <span></span>                    <div class="weui-desktop-key-tag weui-desktop-key-tag_pay" v-if="article.is_pay_subscribe == 1">付费</div>                    <span v-html="article.title"></span>                  </div>                  <div class="inner_link_article_date">{{ article.update_time | formatDate }}</div>                </div>                                <span class="weui-desktop-vm_default">                  <a :href="article.link" target="_blank">查看文章</a>                </span>              </label>            </mp-radio-group>          </div>          <div v-else class="weui-desktop-media-tips weui-desktop-tips">暂无数据</div>        </div>        <mp-pagination          v-if="!msgSearchLoading"          :total-num="msgSearchTotal"          :per-page="msgSearchCountPerPage"          :current="msgSearchCurrentPage"          @page-change="msgPageChange"></mp-pagination>      </div>    </mp-form-item>  </template>    <template v-if="innerLinkModel.type === \'url\'">    <mp-form-item prop="linkUrl" key="linkUrl">      <template slot="label">文章链接</template>      <template>        <mp-input          filter="trim"          v-model.trim="innerLinkModel.linkUrl"          placeholder="请输入http://或https://开头的公众号文章链接">                  </mp-input>      </template>    </mp-form-item>  </template></mp-form>'})
define("pages/modules/utils/string.js",[],function(t,n,e){"use strict"
function i(t,n){var e=void 0
e=!1===n?["&#39;","'","&quot;",'"',"&nbsp;"," ","&gt;",">","&lt;","<","&amp;","&"]:["&","&amp;","<","&lt;",">","&gt;"," ","&nbsp;",'"',"&quot;","'","&#39;"]
for(var i=t,r=0;r<e.length;r+=2)i=i.replace(new RegExp(e[r],"g"),e[1+r])
return i}e.exports={https2http:function(t){return t.replace(/https:\/\/mmbiz\.qlogo\.cn\//g,"http://mmbiz.qpic.cn/")},http2https:function(t){return t.replace(/http:\/\/mmbiz\.qpic\.cn\//g,"https://mmbiz.qlogo.cn/")},nogif:function(t){return-1<t.indexOf("wx_fmt=gif")||-1<t.indexOf("/mmbiz_gif/")?t.replace("/0?","/s640?").replace("wx_fmt=gif",""):t.toString()},htmlEncode:function(t){return i(t,!0)},htmlDecode:function(t){return i(t,!1)},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}})
define("pages/modules/media_dialog/link_dialog/outer_link.js",["pages/modules/media_dialog/link_dialog/outer_link.tpl.js"],function(F,u,t){"use strict"
var e=F("pages/modules/media_dialog/link_dialog/outer_link.tpl.js")
Vue.component("mp-outer-link",{template:e,props:{linkTitle:String,linkUrl:String},data:function(){return{disabledTitleInput:!!this.linkTitle.length,outerLinkModel:{linkTitle:this.linkTitle,linkUrl:this.linkUrl},outerLinkRules:{linkTitle:{required:!0,message:"请输入链接标题",trigger:"none"},linkUrl:[{validator:function(F,u,t){return u?/^https?:\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(u)?t():t(new Error("请输入有效的链接(必须以http://或https://开头)")):t(new Error("链接地址不能为空，请输入以http://或https://开头的地址"))},trigger:"none"}]}}},methods:{getData:function(){var e=this
return new Promise(function(t){e.$refs.outerLinkForm.validate(function(F){if(F){var u={target:"_blank",href:e.outerLinkModel.linkUrl,textValue:e.outerLinkModel.linkTitle}
t(u)}return!1})})}}})})
define("pages/modules/media_dialog/link_dialog/outer_link.tpl.js",[],function(e,t,l){return'<mp-form :rules="outerLinkRules" ref="outerLinkForm" :model="outerLinkModel">  <mp-form-item prop="linkTitle">    <template slot="label">链接标题</template>    <template>      <mp-input        ref="linkInput"        filter="trim"        v-model.trim="outerLinkModel.linkTitle"        :disabled="disabledTitleInput">      </mp-input>    </template>  </mp-form-item>  <mp-form-item prop="linkUrl">    <template slot="label">链接地址</template>    <template>      <mp-input        ref="linkInput"        filter="trim"        v-model.trim="outerLinkModel.linkUrl"        placeholder="请输入http://或https://开头的链接">      </mp-input>    </template>  </mp-form-item></mp-form>'})
